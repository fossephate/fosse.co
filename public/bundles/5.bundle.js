(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{230:function(e,t,a){"use strict";function s(e,t,a){arguments.length<3&&(a=.5);let s=e.slice();for(let n=0;n<3;n++)s[n]=Math.round(s[n]+a*(t[n]-e[n]));return s}function n(e,t,a){let n=1/(a-1),o=[];e=e.match(/\d+/g).map(Number),t=t.match(/\d+/g).map(Number);for(let r=0;r<a;r++)o.push(s(e,t,n*r));return o}a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o}));const o={mobile:`@media (min-width: ${"600px"})`,tablet:`@media (min-width: ${"768px"})`,laptop:`@media (min-width: ${"1024px"})`,desktop:`@media (min-width: ${"1440px"})`}},266:function(e,t){},314:function(e,t,a){"use strict";var s=a(234);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(0)),o=(0,s(a(236)).default)(n.default.createElement(n.default.Fragment,null,n.default.createElement("path",{d:"M12 4c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8zm-1 12H9V8h2v8zm4 0h-2V8h2v8z",opacity:".3"}),n.default.createElement("path",{d:"M13 8h2v8h-2zM9 8h2v8H9z"}),n.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})),"PauseCircleFilledTwoTone");t.default=o},315:function(e,t,a){"use strict";var s=a(234);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(0)),o=(0,s(a(236)).default)(n.default.createElement(n.default.Fragment,null,n.default.createElement("path",{d:"M12 20c4.41 0 8-3.59 8-8s-3.59-8-8-8-8 3.59-8 8 3.59 8 8 8zM10 7.5l6 4.5-6 4.5v-9z",opacity:".3"}),n.default.createElement("path",{d:"M12 22c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10zm0-18c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8zm-2 3.5v9l6-4.5z"})),"PlayCircleFilledTwoTone");t.default=o},316:function(e,t,a){"use strict";var s=a(234);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(0)),o=(0,s(a(236)).default)(n.default.createElement("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward");t.default=o},317:function(e,t,a){"use strict";var s=a(234);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(0)),o=(0,s(a(236)).default)(n.default.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");t.default=o},318:function(e,t,a){"use strict";var s=a(234);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(0)),o=(0,s(a(236)).default)(n.default.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.default=o},361:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),o=a(10),r=a(69),i=a(56),l=a(360),c=a(349),p=a(365),m=a(352),u=a(354),h=a(356),d=a(355),g=a(12),v=a(231),f=a(230);function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b={root:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",height:"100vh",width:"100%",maxWidth:"600px",maxHeight:"700px",margin:"auto 0"},[f.a.tablet]:{root:{}},[f.a.laptop]:{root:{maxWidth:"none",maxHeight:"none"}},textField:{margin:"0px"},formPart:{display:"flex",flexDirection:"row",justifyContent:"center",height:"min-content"},centerText:{display:"flex !important",justifyContent:"center !important"},joinButton:{whiteSpace:"nowrap"}};class x extends s.PureComponent{constructor(e){super(e),y(this,"componentWillUnmount",()=>{this.props.store.dispatch(Object(i.a)({theme:"dark"}))}),y(this,"handleJoin",()=>{this.props.history.push(`/dj/${this.state.roomName}`)}),y(this,"handleCreate",()=>{this.socket.emit("createRoom",null,e=>{e.success?this.setState({open:!0,roomName:e.roomName}):alert(e.reason)})}),y(this,"handleClose",()=>{this.props.history.push(`/dj/${this.state.roomName}`),this.setState({open:!1})}),y(this,"handleText",e=>{this.setState({roomName:e.target.value})}),this.socket=null,this.state={roomName:"",open:!1}}componentDidMount(){this.socket&&(this.socket.close(),this.socket=null),this.socket=this.props.serverConnection,this.props.store.dispatch(Object(i.a)({theme:"spotify"}))}render(){console.log("re-rendering main");const{classes:e}=this.props;return n.a.createElement("div",{className:e.root},n.a.createElement("h1",{style:{textAlign:"center"}},"Democratic DJ"),n.a.createElement("h2",{className:e.centerText},"Join a Room"),n.a.createElement("div",{className:e.formPart},n.a.createElement(l.a,{id:"outlined-name",label:"Room Name",className:e.textField,value:this.state.roomName,onChange:this.handleText,margin:"normal",variant:"outlined"}),n.a.createElement("div",{style:{width:"10px"}}),n.a.createElement(c.a,{className:e.joinButton,variant:"contained",color:"primary",size:"medium",onClick:this.handleJoin,onKeyPress:e=>{"Enter"==e.key&&this.handleJoin()}},"Join Room")),n.a.createElement("h2",{className:e.centerText},"OR"),n.a.createElement("div",{className:e.formPart},n.a.createElement(c.a,{variant:"contained",color:"secondary",size:"large",onClick:this.handleCreate},"Create A Room")),n.a.createElement(p.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm"},n.a.createElement(m.a,{id:"alert-dialog-title"},"Room Created!"),n.a.createElement(u.a,null,n.a.createElement(h.a,{id:"alert-dialog-description"},"A room has been created with the room name ",this.state.roomName)),n.a.createElement(d.a,null,n.a.createElement(c.a,{onClick:this.handleClose,color:"primary",variant:"contained"},"OK"))))}}var E=Object(v.a)(o.f,Object(g.a)(b),Object(r.b)(e=>({}),e=>({})))(x);const N=e=>({type:"UPDATE_SONG_NAME",payload:{songName:e}}),C=e=>({type:"UPDATE_SEARCH_RESULTS",payload:{searchResults:e}});var S=a(211),w=a(351),j=a(315),D=a.n(j),O=a(314),R=a.n(O);class k extends s.PureComponent{constructor(e){var t,a,s;super(e),s=()=>{this.state.playing?(this.audio&&(this.audio.pause(),this.audio.currentTime=0),this.setState({playing:!1})):(!this.audio&&this.props.audioURL&&(this.audio=new Audio(this.props.audioURL),this.audio.volume=.1),this.props.audioURL&&this.audio.play(),this.setState({playing:!0}))},(a="handleClick")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.state={playing:!1},this.audio=null}componentDidMount(){this.props.audioURL&&(this.audio=new Audio(this.props.audioURL),this.audio.volume=.1)}componentDidUpdate(e){this.props.audioURL!==e.audioURL&&(e.audioURL&&this.audio.pause(),this.props.audioURL&&(this.audio=new Audio(this.props.audioURL),this.audio.volume=.1))}componentWillUnmount(){}render(){const{classes:e}=this.props;return this.props.audioURL?n.a.createElement("div",{className:e.root,onClick:this.handleClick},n.a.createElement("img",{className:e.albumArt,src:this.props.imageURL}),this.state.playing?n.a.createElement(R.a,{className:e.icon}):n.a.createElement(D.a,{className:e.icon})):n.a.createElement("div",{className:e.root},n.a.createElement("img",{className:e.albumArt,src:this.props.imageURL}))}}var U=Object(v.a)(Object(g.a)(e=>({root:{display:"flex",flexDirection:"row",minHeight:"75px",fontSize:"16px",position:"relative"},albumArt:{alignSelf:"center",width:"75px",height:"auto",cursor:"pointer"},icon:{pointerEvents:"none",fontSize:"50px",opacity:.7,position:"absolute",left:"50%",marginLeft:"-0.5em",top:"50%",marginTop:"-0.5em"},[f.a.tablet]:{root:{minHeight:"150px",fontSize:"20px"},albumArt:{width:"150px"},icon:{fontSize:"90px"}},[f.a.laptop]:{root:{}}})),Object(r.b)(e=>({}),e=>({})))(k),L=a(316),P=a.n(L),z=a(317),A=a.n(z),T=a(318),M=a.n(T),_=a(55),F=a.n(_);function W(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class H extends s.PureComponent{constructor(e){super(e),W(this,"handleSubmitSong",()=>{this.props.serverConnection.emit("submitSong",{songData:this.props.songData},e=>{e.success||alert(e.reason)}),this.props.updateSongName(""),this.props.updateSearchResults([])}),W(this,"handleUpvote",()=>{1!==this.upvoteState?this.props.serverConnection.emit("vote",{songName:this.props.songData.songName,type:"up"},e=>{e.success}):this.neutralVote()}),W(this,"handleDownvote",()=>{-1!==this.upvoteState?this.props.serverConnection.emit("vote",{songName:this.props.songData.songName,type:"down"},e=>{e.success}):this.neutralVote()}),W(this,"neutralVote",()=>{this.props.serverConnection.emit("vote",{songName:this.props.songData.songName,type:"neutral"},e=>{e.success})}),W(this,"handleRemove",()=>{this.props.serverConnection.emit("removeSong",{songName:this.props.songData.songName},e=>{e.success})}),this.upvoteState=0}componentDidMount(){}componentWillUnmount(){}render(){const{classes:e}=this.props;let t=window.innerWidth<768,a=this.props.songData.album.images[t?2:1],s=t?"small":"medium";if(this.props.isResult)return n.a.createElement(S.a,{className:e.root,elevation:4},n.a.createElement(U,{imageURL:a.url,audioURL:this.props.songData.preview_url}),n.a.createElement("div",{style:{width:"20px"}}),n.a.createElement("div",{className:e.songName},n.a.createElement("span",null,this.props.songData.songName),n.a.createElement("span",null,this.props.songData.album.artists[0].name)),n.a.createElement(c.a,{className:e.submitButton,onClick:this.handleSubmitSong,color:"primary",variant:"contained",size:"large"},"Submit"));{let t=this.props.songData.votes;for(let e=0;e<t.length;e++){let a=t[e];if(a.username===this.props.username){"up"===a.type?this.upvoteState=1:"down"===a.type?this.upvoteState=-1:"neutral"===a.type&&(this.upvoteState=0);break}}return n.a.createElement(S.a,{className:e.root,elevation:4},n.a.createElement("div",{className:e.songUpvotes},this.props.songData.upvotes),n.a.createElement("div",{className:e.upvoteArea},n.a.createElement(w.a,{variant:"contained",color:"primary",size:s,onClick:this.handleUpvote,className:F()(e.icon,1===this.upvoteState&&e.highlighted)},n.a.createElement(P.a,null)),n.a.createElement(w.a,{variant:"contained",color:"secondary",size:s,onClick:this.handleDownvote,className:F()(e.icon,-1===this.upvoteState&&e.highlighted)},n.a.createElement(A.a,null))),n.a.createElement(U,{imageURL:a.url,audioURL:this.props.songData.preview_url}),n.a.createElement("div",{style:{width:"20px"}}),n.a.createElement("div",{className:e.songName},n.a.createElement("span",null,this.props.songData.songName),n.a.createElement("span",null,this.props.songData.album.artists[0].name)),n.a.createElement("div",{style:{minWidth:"10px",flex:"1"}}),n.a.createElement("div",{className:e.songSuggester},n.a.createElement("span",null,"suggested by: "),n.a.createElement("span",null,this.props.songData.username)),n.a.createElement("div",{style:{width:"10px"}}),this.props.songData.username===this.props.username&&n.a.createElement("div",{className:e.removeArea},n.a.createElement(w.a,{variant:"contained",color:"secondary",size:"medium",onClick:this.handleRemove,className:F()(e.icon,-1===this.upvoteState&&e.highlighted)},n.a.createElement(M.a,null))))}}}var V=Object(v.a)(Object(g.a)(e=>({root:{display:"flex",flexDirection:"row",minHeight:"75px",fontSize:"16px"},albumArt:{alignSelf:"center",width:"75px",height:"auto"},[f.a.tablet]:{root:{minHeight:"150px",fontSize:"20px"},albumArt:{width:"150px"}},[f.a.laptop]:{root:{}},highlighted:{backgroundColor:"#FAFAD2AA"},songName:{display:"flex",flexDirection:"column",justifyContent:"space-evenly","& span:last-child":{fontSize:"0.8em"}},icon:{},songUpvotes:{margin:"0 10px",alignSelf:"center"},upvoteArea:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",marginRight:"10px"},songSuggester:{fontSize:"0.8em",display:"flex",flexDirection:"column",textAlign:"center",justifyContent:"center",whiteSpace:"nowrap"},removeArea:{display:"flex",flexDirection:"column",justifyContent:"space-evenly"},submitButton:{marginLeft:"auto",marginRight:"10px",marginTop:"auto",marginBottom:"auto"}})),Object(r.b)(e=>({}),e=>({updateSongName:t=>{e(N(t))},updateSearchResults:t=>{e(C(t))}})))(H);class B extends s.PureComponent{constructor(e){super(e),this.state={}}handleClick(e){}mapSongs(){let e=[];for(let t=0;t<this.props.source.length;t++){let a=this.props.source[t];e.push(n.a.createElement(V,{key:t,serverConnection:this.props.serverConnection,username:this.props.username,songData:{...a},isResult:"results"===this.props.type}))}return 0===e.length&&e.push(n.a.createElement("div",{key:0,className:this.props.classes.noSongs},"songs"===this.props.type?"No songs submitted yet!":"No Songs Found!")),e}render(){const{classes:e}=this.props;return n.a.createElement(S.a,{id:"songList",className:e.root,elevation:4},this.mapSongs(),n.a.createElement("div",{style:{height:"4px"}}))}}var J=Object(v.a)(Object(g.a)(e=>({root:{display:"grid",flexDirection:"column",gridGap:"5px",padding:"10px",overflowY:"auto",overflowX:"hidden"},noSongs:{textAlign:"center",marginTop:"10px"}})),Object(r.b)(e=>({}),e=>({})))(B);let $=function(e,t,a){let s,n,o,r=null,i=0;a||(a={});let l=()=>{i=!1===a.leading?0:Date.now(),r=null,o=e.apply(s,n),r||(s=n=null)};return function(){let c=Date.now();i||!1!==a.leading||(i=c);let p=t-(c-i);return s=this,n=arguments,p<=0||p>t?(r&&(clearTimeout(r),r=null),i=c,o=e.apply(s,n),r||(s=n=null)):r||!1===a.trailing||(r=setTimeout(l,p)),o}}((e,t)=>{""!==t?e.socket.emit("searchSong",{songName:t},t=>{e.props.updateSearchResults(t.searchResults)}):e.props.updateSearchResults([])},500);class G extends s.PureComponent{constructor(e){var t,a,s;super(e),s=e=>{this.props.updateSongName(e.target.value),$(this,e.target.value)},(a="handleText")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.socket=null,this.state={songName:"",searchResults:[]}}componentDidMount(){this.socket=this.props.serverConnection}render(){const{classes:e}=this.props;return n.a.createElement(S.a,{id:"songSubmitForm",className:e.root,elevation:4},n.a.createElement(l.a,{id:"songSearchField",label:"Enter a Song or Artist Name",className:e.textField,value:this.props.songName,onChange:this.handleText,margin:"normal",variant:"outlined",fullWidth:!0}))}}var K=Object(v.a)(Object(g.a)(e=>({root:{display:"flex",flexDirection:"row",marginBottom:"10px"},textField:{margin:"2%"}})),Object(r.b)(e=>({songName:e.dj.songs.songName}),e=>({updateSongName:t=>{e(N(t))},updateSearchResults:t=>{e(C(t))}})))(G);const X={root:{display:"flex",flexDirection:"column",fontSize:"16px",width:"100%",maxWidth:"600px"},[f.a.tablet]:{root:{fontSize:"20px"}},[f.a.laptop]:{root:{}},textField:{margin:"0px"},formPart:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",height:"min-content"},exportButton:{marginTop:"10px"}};class I extends s.PureComponent{constructor(e){super(e),this.socket=null,this.handleSubmitUsername=this.handleSubmitUsername.bind(this),this.handleText=this.handleText.bind(this),this.handleCreatePlaylist=this.handleCreatePlaylist.bind(this),this.state={username:"",roomName:"",openUsernameDialog:!0},this.roomName=null}componentDidMount(){this.socket=this.props.serverConnection,this.roomName=this.props.match.params.roomName,this.roomName||console.log("room name not set!"),this.socket.on("songList",e=>{this.props.updateSongList(e.songList)})}componentWillUnmount(){}handleSubmitUsername(){""!==this.state.username?this.socket.emit("joinRoom",{roomName:this.roomName,username:this.state.username},e=>{e.success?this.setState({openUsernameDialog:!1}):alert(e.reason)}):alert("username can't be empty")}handleText(e){this.setState({username:e.target.value})}handleCreatePlaylist(){this.socket.emit("createPlaylist",null,e=>{e.success?console.log(e.playlist):console.log(e.reason)})}render(){console.log("rendering dj-room.");const{classes:e}=this.props;return n.a.createElement("div",{className:e.root},n.a.createElement(K,{serverConnection:this.props.serverConnection}),this.props.searchResults.length>0&&n.a.createElement(J,{serverConnection:this.props.serverConnection,source:this.props.searchResults,type:"results"}),0===this.props.searchResults.length&&n.a.createElement(J,{serverConnection:this.props.serverConnection,username:this.state.username,source:this.props.songList,type:"songs"}),n.a.createElement(c.a,{className:e.exportButton,onClick:this.handleCreatePlaylist,color:"primary",variant:"contained"},"Export to Spotify"),n.a.createElement(p.a,{open:this.state.openUsernameDialog,onClose:()=>{},fullWidth:!0,maxWidth:"sm"},n.a.createElement(m.a,{id:"alert-dialog-title"},"Pick a username"),n.a.createElement(u.a,null,n.a.createElement(l.a,{autoFocus:!0,margin:"dense",id:"name",label:"Username",type:"username",value:this.state.username,onChange:this.handleText,onKeyPress:e=>{"Enter"==e.key&&this.handleSubmitUsername()},fullWidth:!0})),n.a.createElement(d.a,null,n.a.createElement(c.a,{onClick:this.handleSubmitUsername,color:"primary",variant:"contained"},"Submit"))))}}var Y=Object(v.a)(o.f,Object(g.a)(X),Object(r.b)(e=>({songList:e.dj.songs.songList,searchResults:e.dj.songs.searchResults}),e=>({updateSongList:t=>{e({type:"UPDATE_SONG_LIST",payload:{songList:t}})}})))(I);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}const Q={root:{display:"flex",justifyContent:"center",height:"100%"},[f.a.tablet]:{root:{}},[f.a.laptop]:{root:{}}};class Z extends s.Component{constructor(e){super(e),this.socket=null,this.state={roomName:"",open:!1}}componentDidMount(){this.socket&&(this.socket.close(),this.socket=null),this.socket=this.props.serverConnection,this.props.store.dispatch(Object(i.a)({theme:"spotify"}))}render(){console.log("re-rendering app.");const{classes:e}=this.props;return n.a.createElement("div",{className:e.root},n.a.createElement(o.c,null,n.a.createElement(o.a,{path:"/dj/:roomName",render:e=>n.a.createElement(Y,q({},e,{store:this.props.store,serverConnection:this.props.serverConnection}))}),n.a.createElement(o.a,{path:"/",render:e=>n.a.createElement(E,q({},e,{store:this.props.store,serverConnection:this.props.serverConnection}))})))}}var ee=Object(v.a)(o.f,Object(g.a)(Q),Object(r.b)(e=>({}),e=>({})))(Z),te=a(5),ae=(a(92),a(257)),se=a.n(ae);function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||te.compose;class oe extends s.Component{constructor(e){super(e),this.serverConnection=se()("https://fosse.co",{path:"/8001/socket.io",transports:["polling","websocket","xhr-polling","jsonp-polling"]})}componentDidMount(){}shouldComponentUpdate(e,t){return!0}render(){return console.log("re-rendering index"),n.a.createElement(ee,ne({},this.props,{serverConnection:this.serverConnection,sagaMiddleware:this.sagaMiddleware}))}}t.default=oe}}]);