(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{230:function(e,t,n){"use strict";function o(e,t,n){arguments.length<3&&(n=.5);let o=e.slice();for(let a=0;a<3;a++)o[a]=Math.round(o[a]+n*(t[a]-e[a]));return o}function a(e,t,n){let a=1/(n-1),i=[];e=e.match(/\d+/g).map(Number),t=t.match(/\d+/g).map(Number);for(let r=0;r<n;r++)i.push(o(e,t,a*r));return i}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));const i={mobile:`@media (min-width: ${"600px"})`,tablet:`@media (min-width: ${"768px"})`,laptop:`@media (min-width: ${"1024px"})`,desktop:`@media (min-width: ${"1440px"})`}},257:function(e,t){},325:function(e,t,n){"use strict";var o=n(240);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(0)),i=(0,o(n(258)).default)(a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{d:"M12 4c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8zm-1 12H9V8h2v8zm4 0h-2V8h2v8z",opacity:".3"}),a.default.createElement("path",{d:"M13 8h2v8h-2zM9 8h2v8H9z"}),a.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})),"PauseCircleFilledTwoTone");t.default=i},326:function(e,t,n){"use strict";var o=n(240);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(0)),i=(0,o(n(258)).default)(a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{d:"M12 20c4.41 0 8-3.59 8-8s-3.59-8-8-8-8 3.59-8 8 3.59 8 8 8zM10 7.5l6 4.5-6 4.5v-9z",opacity:".3"}),a.default.createElement("path",{d:"M12 22c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10zm0-18c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8zm-2 3.5v9l6-4.5z"})),"PlayCircleFilledTwoTone");t.default=i},368:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(8),r=n(70),s=n(39),l=n(361),p=n(367),c=n(373),m=n(365),h=n(364),u=n(366),d=n(363),f=n(12),g=n(231),v=n(230);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b={root:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",height:"100vh",width:"100%",maxWidth:"600px",maxHeight:"700px",margin:"auto 0"},[v.a.tablet]:{root:{}},[v.a.laptop]:{root:{maxWidth:"none",maxHeight:"none"}},textField:{margin:"0px"},formPart:{display:"flex",flexDirection:"row",justifyContent:"center",height:"min-content"},centerText:{display:"flex !important",justifyContent:"center !important"},joinButton:{whiteSpace:"nowrap"}};class N extends o.PureComponent{constructor(e){super(e),y(this,"componentWillUnmount",()=>{this.props.store.dispatch(Object(s.b)({theme:"dark"}))}),y(this,"handleJoin",()=>{this.props.history.push(`/dj/${this.state.roomName}`)}),y(this,"handleCreate",()=>{this.socket.emit("createRoom",null,e=>{e.success?this.setState({open:!0,roomName:e.roomName}):alert(e.reason)})}),y(this,"handleClose",()=>{this.props.history.push(`/dj/${this.state.roomName}`),this.setState({open:!1})}),y(this,"handleText",e=>{this.setState({roomName:e.target.value})}),this.socket=null,this.state={roomName:"",open:!1}}componentDidMount(){this.socket&&(this.socket.close(),this.socket=null),this.socket=this.props.serverConnection,this.props.store.dispatch(Object(s.b)({theme:"spotify"}))}render(){console.log("re-rendering main");const{classes:e}=this.props;return a.a.createElement("div",{className:e.root},a.a.createElement("h1",{style:{textAlign:"center"}},"Democratic DJ"),a.a.createElement("h2",{className:e.centerText},"Join a Room"),a.a.createElement("div",{className:e.formPart},a.a.createElement(p.a,{id:"outlined-name",label:"Room Name",className:e.textField,value:this.state.roomName,onChange:this.handleText,margin:"normal",variant:"outlined"}),a.a.createElement("div",{style:{width:"10px"}}),a.a.createElement(l.a,{className:e.joinButton,variant:"contained",color:"primary",size:"medium",onClick:this.handleJoin,onKeyPress:e=>{"Enter"==e.key&&this.handleJoin()}},"Join Room")),a.a.createElement("h2",{className:e.centerText},"OR"),a.a.createElement("div",{className:e.formPart},a.a.createElement(l.a,{variant:"contained",color:"secondary",size:"large",onClick:this.handleCreate},"Create A Room")),a.a.createElement(c.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm"},a.a.createElement(d.a,{id:"alert-dialog-title"},"Room Created!"),a.a.createElement(h.a,null,a.a.createElement(u.a,{id:"alert-dialog-description"},"A room has been created with the room name ",this.state.roomName)),a.a.createElement(m.a,null,a.a.createElement(l.a,{onClick:this.handleClose,color:"primary",variant:"contained"},"OK"))))}}var x=Object(g.a)(i.f,Object(f.a)(b),Object(r.b)(e=>({}),e=>({})))(N),C=n(72),D=n(362),E=n(211),A=n(326),S=n.n(A),w=n(325),j=n.n(w);class O extends o.PureComponent{constructor(e){var t,n,o;super(e),o=()=>{this.state.playing?(this.audio&&(this.audio.pause(),this.audio.currentTime=0),document.title="Democratic DJ",this.setState({playing:!1})):(!this.audio&&this.props.audioURL&&(this.audio=new Audio(this.props.audioURL),this.audio.volume=.1),this.props.audioURL&&this.audio.play(),document.title=`${this.props.songName}`,this.setState({playing:!0}))},(n="handleClick")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,this.state={playing:!1},this.audio=null}componentDidMount(){this.props.audioURL&&(this.audio=new Audio(this.props.audioURL),this.audio.volume=.1)}componentDidUpdate(e){this.props.audioURL!==e.audioURL&&(e.audioURL&&this.audio.pause(),this.props.audioURL&&(this.audio=new Audio(this.props.audioURL),this.audio.volume=.1))}componentWillUnmount(){}render(){const{classes:e}=this.props;return this.props.audioURL||console.log(this.props.songName),this.props.audioURL?a.a.createElement("div",{className:e.root,onClick:this.handleClick},a.a.createElement("img",{className:e.albumArt,src:this.props.imageURL}),this.state.playing?a.a.createElement(j.a,{className:e.icon}):a.a.createElement(S.a,{className:e.icon})):a.a.createElement("div",{className:e.root},a.a.createElement("img",{className:e.albumArt,src:this.props.imageURL}))}}var P=Object(g.a)(Object(f.a)(e=>({root:{display:"flex",flexDirection:"row",minHeight:"75px",fontSize:"16px",position:"relative"},albumArt:{alignSelf:"center",width:"75px",height:"auto",cursor:"pointer",borderRadius:"8px"},icon:{pointerEvents:"none",fontSize:"50px",opacity:.7,position:"absolute",left:"50%",marginLeft:"-0.5em",top:"50%",marginTop:"-0.5em"},[v.a.tablet]:{root:{minHeight:"150px",fontSize:"20px"},albumArt:{width:"150px"},icon:{fontSize:"90px"}},[v.a.laptop]:{root:{}}})),Object(r.b)(e=>({}),e=>({})))(O),k=n(1),R=n(77);function B(e,t){var n=a.a.memo(a.a.forwardRef((function(t,n){return a.a.createElement(R.a,Object(k.a)({ref:n},t),e)})));return n.muiName=R.a.muiName,n}var F=B(a.a.createElement("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"})),L=B(a.a.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"})),U=B(a.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),T=n(57),z=n.n(T);function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class H extends o.PureComponent{constructor(e){super(e),M(this,"handleSubmitSong",()=>{this.props.serverConnection.emit("submitSong",{songData:this.props.songData},e=>{e.success||alert(e.reason)}),this.props.updateSongName(""),this.props.updateSearchResults([])}),M(this,"handleUpvote",()=>{1!==this.upvoteState?this.props.serverConnection.emit("vote",{songName:this.props.songData.songName,type:"up"},e=>{e.success}):this.neutralVote()}),M(this,"handleDownvote",()=>{-1!==this.upvoteState?this.props.serverConnection.emit("vote",{songName:this.props.songData.songName,type:"down"},e=>{e.success}):this.neutralVote()}),M(this,"neutralVote",()=>{this.props.serverConnection.emit("vote",{songName:this.props.songData.songName,type:"neutral"},e=>{e.success})}),M(this,"handleRemove",()=>{this.props.serverConnection.emit("removeSong",{songName:this.props.songData.songName},e=>{e.success})}),this.upvoteState=0}componentDidMount(){}componentWillUnmount(){}render(){const{classes:e}=this.props;let t=window.innerWidth<768,n=this.props.songData.album.images[t?2:1],o=t?"small":"medium";if(this.props.isResult)return a.a.createElement(E.a,{className:e.root,elevation:4},a.a.createElement(P,{imageURL:n.url,audioURL:this.props.songData.preview_url,songName:this.props.songData.songName,artistName:this.props.songData.album.artists[0].name}),a.a.createElement("div",{style:{width:"20px"}}),a.a.createElement("div",{className:e.songName},a.a.createElement("span",null,this.props.songData.songName),a.a.createElement("span",null,this.props.songData.album.artists[0].name)),a.a.createElement(l.a,{className:e.submitButton,onClick:this.handleSubmitSong,color:"primary",variant:"contained",size:"large"},"Submit"));{let t=this.props.songData.votes;for(let e=0;e<t.length;e++){let n=t[e];if(n.username===this.props.username){"up"===n.type?this.upvoteState=1:"down"===n.type?this.upvoteState=-1:"neutral"===n.type&&(this.upvoteState=0);break}}return a.a.createElement(E.a,{className:e.root,elevation:4},a.a.createElement("div",{className:e.placeNum},"#",this.props.num+1),a.a.createElement("div",{className:e.upvoteArea},a.a.createElement(D.a,{variant:"contained",color:"primary",size:o,onClick:this.handleUpvote,className:z()(e.icon,1===this.upvoteState&&e.highlighted)},a.a.createElement(F,null)),a.a.createElement("div",{className:e.songUpvotes},this.props.songData.upvotes),a.a.createElement(D.a,{variant:"contained",color:"secondary",size:o,onClick:this.handleDownvote,className:z()(e.icon,-1===this.upvoteState&&e.highlighted)},a.a.createElement(L,null))),a.a.createElement(P,{imageURL:n.url,audioURL:this.props.songData.preview_url,songName:this.props.songData.songName,artistName:this.props.songData.album.artists[0].name}),a.a.createElement("div",{style:{width:"20px"}}),a.a.createElement("div",{className:e.songName},a.a.createElement("span",null,this.props.songData.songName),a.a.createElement("span",null,this.props.songData.album.artists[0].name)),a.a.createElement("div",{style:{minWidth:"10px",flex:"1"}}),a.a.createElement("div",{style:{width:"10px"}}),this.props.songData.username===this.props.username&&a.a.createElement("div",{className:e.removeArea},a.a.createElement(D.a,{variant:"contained",color:"secondary",size:o,onClick:this.handleRemove,className:z()(e.icon,-1===this.upvoteState&&e.highlighted)},a.a.createElement(U,null))))}}}var W=Object(g.a)(Object(f.a)(e=>({root:{display:"flex",flexDirection:"row",minHeight:"85px",fontSize:"16px"},upvoteArea:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",margin:"0 10px"},songUpvotes:{alignSelf:"center",fontSize:"0.8em"},placeNum:{textAlign:"center",alignSelf:"center",margin:"0 10px",fontSize:"0.8em"},[v.a.tablet]:{root:{minHeight:"150px",fontSize:"20px"},upvoteArea:{justifyContent:"space-between",margin:"0 5px"},songUpvotes:{fontSize:"1em"},placeNum:{margin:"0 5px",fontSize:"1em"}},[v.a.laptop]:{root:{}},highlighted:{backgroundColor:"#FAFAD2AA"},songName:{display:"flex",flexDirection:"column",justifyContent:"space-evenly","& span:last-child":{fontSize:"0.8em"}},icon:{},songSuggester:{fontSize:"0.8em",display:"flex",flexDirection:"column",textAlign:"center",justifyContent:"center",whiteSpace:"nowrap"},removeArea:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",marginRight:"10px"},submitButton:{marginLeft:"auto",marginRight:"10px",marginTop:"auto",marginBottom:"auto"}})),Object(r.b)(e=>({}),e=>({updateSongName:t=>{e(Object(C.d)(t))},updateSearchResults:t=>{e(Object(C.b)(t))}}),null,{forwardRef:!0}))(H),_=n(17),I=n.n(_);function V(e){var t=!1;return function(){t||(console.warn(e),t=!0)}}V("\n>> Error, via react-flip-move <<\n\nYou provided a stateless functional component as a child to <FlipMove>. Unfortunately, SFCs aren't supported, because Flip Move needs access to the backing instances via refs, and SFCs don't have a public instance that holds that info.\n\nPlease wrap your components in a native element (eg. <div>), or a non-functional component.\n"),V("\n>> Error, via react-flip-move <<\n\nYou provided a primitive (text or number) node as a child to <FlipMove>. Flip Move needs containers with unique keys to move children around.\n\nPlease wrap your value in a native element (eg. <span>), or a component.\n");var J=V("\n>> Warning, via react-flip-move <<\n\nWhen using \"wrapperless\" mode (by supplying 'typeName' of 'null'), strange things happen when the direct parent has the default \"static\" position.\n\nFlipMove has added 'position: relative' to this node, to ensure Flip Move animates correctly.\n\nTo avoid seeing this warning, simply apply a non-static position to that parent node.\n"),$=V("\n>> Warning, via react-flip-move <<\n\nOne or more of Flip Move's child elements have the html attribute 'disabled' set to true.\n\nPlease note that this will cause animations to break in Internet Explorer 11 and below. Either remove the disabled attribute or set 'animation' to false.\n"),K={elevator:{from:{transform:"scale(0)",opacity:"0"},to:{transform:"",opacity:""}},fade:{from:{opacity:"0"},to:{opacity:""}},accordionVertical:{from:{transform:"scaleY(0)",transformOrigin:"center top"},to:{transform:"",transformOrigin:"center top"}},accordionHorizontal:{from:{transform:"scaleX(0)",transformOrigin:"left center"},to:{transform:"",transformOrigin:"left center"}},none:null},Y={elevator:{from:{transform:"scale(1)",opacity:"1"},to:{transform:"scale(0)",opacity:"0"}},fade:{from:{opacity:"1"},to:{opacity:"0"}},accordionVertical:{from:{transform:"scaleY(1)",transformOrigin:"center top"},to:{transform:"scaleY(0)",transformOrigin:"center top"}},accordionHorizontal:{from:{transform:"scaleX(1)",transformOrigin:"left center"},to:{transform:"scaleX(0)",transformOrigin:"left center"}},none:null},X=K,q=function(e,t){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return t[n]},G=function(e){return(G=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)};var Z,Q,ee=(Z=function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()},Q={},function(e){return Q[e]||(Q[e]=Z(e)),Q[e]}),te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ae=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ie=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t};function re(e){var t,n;return n=t=function(t){function n(){return ne(this,n),ie(this,t.apply(this,arguments))}return ae(n,t),n.prototype.checkChildren=function(e){},n.prototype.convertProps=function(e){var t={children:e.children,easing:e.easing,onStart:e.onStart,onFinish:e.onFinish,onStartAll:e.onStartAll,onFinishAll:e.onFinishAll,typeName:e.typeName,disableAllAnimations:e.disableAllAnimations,getPosition:e.getPosition,maintainContainerHeight:e.maintainContainerHeight,verticalAlignment:e.verticalAlignment,duration:this.convertTimingProp("duration"),delay:this.convertTimingProp("delay"),staggerDurationBy:this.convertTimingProp("staggerDurationBy"),staggerDelayBy:this.convertTimingProp("staggerDelayBy"),appearAnimation:this.convertAnimationProp(e.appearAnimation,X),enterAnimation:this.convertAnimationProp(e.enterAnimation,K),leaveAnimation:this.convertAnimationProp(e.leaveAnimation,Y),delegated:{}};this.checkChildren(t.children);var n=Object.keys(t),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return Object.keys(e).forEach((function(o){-1===t.indexOf(o)&&(n[o]=e[o])})),n}(this.props,n);return o.style=oe({position:"relative"},o.style),t.delegated=o,t},n.prototype.convertTimingProp=function(e){var t=this.props[e],o="number"==typeof t?t:parseInt(t,10);return isNaN(o)?n.defaultProps[e]:o},n.prototype.convertAnimationProp=function(e,t){switch(void 0===e?"undefined":te(e)){case"boolean":return t[e?"elevator":"none"];case"string":return-1===Object.keys(t).indexOf(e)?t.elevator:t[e];default:return e}},n.prototype.render=function(){return a.a.createElement(e,this.convertProps(this.props))},n}(o.Component),t.defaultProps={easing:"ease-in-out",duration:350,delay:0,staggerDurationBy:0,staggerDelayBy:0,typeName:"div",enterAnimation:"elevator",leaveAnimation:"elevator",disableAllAnimations:!1,getPosition:function(e){return e.getBoundingClientRect()},maintainContainerHeight:!1,verticalAlignment:"top"},n}function se(e){var t=e.domNode,n=e.styles;Object.keys(n).forEach((function(e){t.style.setProperty(ee(e),n[e])}))}var le=function(e){var t=e.childDomNode,n={top:0,left:0,right:0,bottom:0,height:0,width:0},o=e.childBoundingBox||n,a=e.parentBoundingBox||n,i=(0,e.getPosition)(t),r=i.top-a.top,s=i.left-a.left;return[o.left-s,o.top-r]},pe=function(e,t){var n=t.delay,o=t.duration,a=t.staggerDurationBy,i=t.staggerDelayBy,r=t.easing;n+=e*i,o+=e*a;return["transform","opacity"].map((function(e){return e+" "+o+"ms "+r+" "+n+"ms"})).join(", ")},ce=function(){var e={transition:"transitionend","-o-transition":"oTransitionEnd","-moz-transition":"transitionend","-webkit-transition":"webkitTransitionEnd"};if("undefined"==typeof document)return"";var t=document.createElement("fakeelement"),n=q((function(e){return void 0!==t.style.getPropertyValue(e)}),Object.keys(e));return n?e[n]:""}(),me=!ce;function he(e){return e.key||""}function ue(e){return o.Children.toArray(e)}var de=re(function(e){function t(){var n,o;ne(this,t);for(var a=arguments.length,i=Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=o=ie(this,e.call.apply(e,[this].concat(i))),o.state={children:ue(o.props?o.props.children:[]).map((function(e){return oe({},e,{element:e,appearing:!0})}))},o.childrenData={},o.parentData={domNode:null,boundingBox:null},o.heightPlaceholderData={domNode:null},o.remainingAnimations=0,o.childrenToAnimate=[],o.findDOMContainer=function(){var e=I.a.findDOMNode(o),t=e&&e.parentNode;t&&t instanceof HTMLElement&&("static"===window.getComputedStyle(t).position&&(t.style.position="relative",J()),o.parentData.domNode=t)},o.runAnimation=function(){var e=o.state.children.filter(o.doesChildNeedToBeAnimated),t=e.map((function(e){return o.computeInitialStyles(e)}));e.forEach((function(e,n){o.remainingAnimations+=1,o.childrenToAnimate.push(he(e)),o.animateChild(e,n,t[n])})),"function"==typeof o.props.onStartAll&&o.callChildrenHook(o.props.onStartAll)},o.doesChildNeedToBeAnimated=function(e){if(!he(e))return!1;var t=o.getChildData(he(e)),n=t.domNode,a=t.boundingBox,i=o.parentData.boundingBox;if(!n)return!1;var r=o.props,s=r.appearAnimation,l=r.enterAnimation,p=r.leaveAnimation,c=r.getPosition,m=e.appearing&&s,h=e.entering&&l,u=e.leaving&&p;if(m||h||u)return!0;var d=le({childDomNode:n,childBoundingBox:a,parentBoundingBox:i,getPosition:c}),f=d[0],g=d[1];return 0!==f||0!==g},ie(o,n)}return ae(t,e),t.prototype.componentDidMount=function(){null===this.props.typeName&&this.findDOMContainer(),this.props.appearAnimation&&!this.isAnimationDisabled(this.props)&&(this.prepForAnimation(),this.runAnimation())},t.prototype.componentDidUpdate=function(e){null===this.props.typeName&&this.findDOMContainer(),!function(e,t){if(e===t)return!0;var n=!G(e)||!G(t),o=e.length!==t.length;return!n&&!o&&function(e,t){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0}((function(e,n){return e===t[n]}),e)}(ue(this.props.children).map((function(e){return e.key})),ue(e.children).map((function(e){return e.key})))&&!this.isAnimationDisabled(this.props)&&(this.prepForAnimation(),this.runAnimation())},t.prototype.calculateNextSetOfChildren=function(e){var t=this,n=e.map((function(e){var n=t.findChildByKey(e.key),o=!n||n.leaving;return oe({},e,{element:e,entering:o})})),o=0;return this.state.children.forEach((function(a,i){if(!q((function(e){return e.key===he(a)}),e)&&t.props.leaveAnimation){var r=oe({},a,{leaving:!0}),s=i+o;n.splice(s,0,r),o+=1}})),n},t.prototype.prepForAnimation=function(){var e=this,t=this.props,n=t.leaveAnimation,o=t.maintainContainerHeight,a=t.getPosition;n&&(this.state.children.filter((function(e){return e.leaving})).forEach((function(t){var n=e.getChildData(he(t));!e.isAnimationDisabled(e.props)&&n.domNode&&n.domNode.disabled&&$(),n.boundingBox&&function(e,t){var n=e.domNode,o=e.boundingBox;if(n&&o){var a=window.getComputedStyle(n),i=["margin-top","margin-left","margin-right"].reduce((function(e,t){var n,o=a.getPropertyValue(t);return oe({},e,((n={})[t]=Number(o.replace("px","")),n))}),{});se({domNode:n,styles:{position:"absolute",top:("bottom"===t?o.top-o.height:o.top)-i["margin-top"]+"px",left:o.left-i["margin-left"]+"px",right:o.right-i["margin-right"]+"px"}})}}(n,e.props.verticalAlignment)})),o&&this.heightPlaceholderData.domNode&&function(e){var t=e.domNode,n=e.parentData,o=e.getPosition,a=n.domNode,i=n.boundingBox;if(a&&i){se({domNode:t,styles:{height:"0"}});var r=i.height-o(a).height;se({domNode:t,styles:{height:r>0?r+"px":"0"}})}}({domNode:this.heightPlaceholderData.domNode,parentData:this.parentData,getPosition:a}));this.state.children.forEach((function(t){var n=e.getChildData(he(t)).domNode;n&&(t.entering||t.leaving||se({domNode:n,styles:{transition:""}}))}))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.updateBoundingBoxCaches();var t=ue(e.children);this.setState({children:this.isAnimationDisabled(e)?t.map((function(e){return oe({},e,{element:e})})):this.calculateNextSetOfChildren(t)})},t.prototype.animateChild=function(e,t,n){var o=this,a=this.getChildData(he(e)).domNode;a&&(se({domNode:a,styles:n}),this.props.onStart&&this.props.onStart(e,a),requestAnimationFrame((function(){requestAnimationFrame((function(){var n={transition:pe(t,o.props),transform:"",opacity:""};e.appearing&&o.props.appearAnimation?n=oe({},n,o.props.appearAnimation.to):e.entering&&o.props.enterAnimation?n=oe({},n,o.props.enterAnimation.to):e.leaving&&o.props.leaveAnimation&&(n=oe({},n,o.props.leaveAnimation.to)),se({domNode:a,styles:n})}))})),this.bindTransitionEndHandler(e))},t.prototype.bindTransitionEndHandler=function(e){var t=this,n=this.getChildData(he(e)).domNode;if(n){n.addEventListener(ce,(function o(a){a.target===n&&(n.style.transition="",t.triggerFinishHooks(e,n),n.removeEventListener(ce,o),e.leaving&&t.removeChildData(he(e)))}))}},t.prototype.triggerFinishHooks=function(e,t){var n=this;if(this.props.onFinish&&this.props.onFinish(e,t),this.remainingAnimations-=1,0===this.remainingAnimations){var o=this.state.children.filter((function(e){return!e.leaving})).map((function(e){return oe({},e,{element:e.element,appearing:!1,entering:!1})}));this.setState({children:o},(function(){"function"==typeof n.props.onFinishAll&&n.callChildrenHook(n.props.onFinishAll),n.childrenToAnimate=[]})),this.heightPlaceholderData.domNode&&(this.heightPlaceholderData.domNode.style.height="0")}},t.prototype.callChildrenHook=function(e){var t=this,n=[],o=[];this.childrenToAnimate.forEach((function(e){var a=t.findChildByKey(e);a&&(n.push(a),t.hasChildData(e)&&o.push(t.getChildData(e).domNode))})),e(n,o)},t.prototype.updateBoundingBoxCaches=function(){var e=this,t=this.parentData.domNode;if(t){this.parentData.boundingBox=this.props.getPosition(t);var n=[];this.state.children.forEach((function(o){var a=he(o);if(a)if(e.hasChildData(a)){var i=e.getChildData(a);i.domNode&&o?n.push(function(e){var t=e.childDomNode,n=e.parentDomNode,o=e.getPosition,a=o(n),i=o(t),r=i.top,s=i.left,l=i.right,p=i.bottom,c=i.width,m=i.height;return{top:r-a.top,left:s-a.left,right:a.right-l,bottom:a.bottom-p,width:c,height:m}}({childDomNode:i.domNode,parentDomNode:t,getPosition:e.props.getPosition})):n.push(null)}else n.push(null);else n.push(null)})),this.state.children.forEach((function(t,o){var a=he(t),i=n[o];a&&e.setChildData(a,{boundingBox:i})}))}},t.prototype.computeInitialStyles=function(e){if(e.appearing)return this.props.appearAnimation?this.props.appearAnimation.from:{};if(e.entering)return this.props.enterAnimation?oe({position:"",top:"",left:"",right:"",bottom:""},this.props.enterAnimation.from):{};if(e.leaving)return this.props.leaveAnimation?this.props.leaveAnimation.from:{};var t=this.getChildData(he(e)),n=t.domNode,o=t.boundingBox,a=this.parentData.boundingBox;if(!n)return{};var i=le({childDomNode:n,childBoundingBox:o,parentBoundingBox:a,getPosition:this.props.getPosition});return{transform:"translate("+i[0]+"px, "+i[1]+"px)"}},t.prototype.isAnimationDisabled=function(e){return me||e.disableAllAnimations||0===e.duration&&0===e.delay&&0===e.staggerDurationBy&&0===e.staggerDelayBy},t.prototype.findChildByKey=function(e){return q((function(t){return he(t)===e}),this.state.children)},t.prototype.hasChildData=function(e){return Object.prototype.hasOwnProperty.call(this.childrenData,e)},t.prototype.getChildData=function(e){return this.hasChildData(e)?this.childrenData[e]:{}},t.prototype.setChildData=function(e,t){this.childrenData[e]=oe({},this.getChildData(e),t)},t.prototype.removeChildData=function(e){delete this.childrenData[e],this.setState((function(t){return oe({},t,{children:t.children.filter((function(t){return t.element.key!==e}))})}))},t.prototype.createHeightPlaceholder=function(){var e=this,t=this.props.typeName,n="ul"===t||"ol"===t?"li":"div";return Object(o.createElement)(n,{key:"height-placeholder",ref:function(t){e.heightPlaceholderData.domNode=t},style:{visibility:"hidden",height:0}})},t.prototype.childrenWithRefs=function(){var e=this;return this.state.children.map((function(t){return Object(o.cloneElement)(t.element,{ref:function(n){if(n){var o=function(e){if("undefined"==typeof HTMLElement)return null;if(e instanceof HTMLElement)return e;var t=Object(_.findDOMNode)(e);return t&&t.nodeType===Node.TEXT_NODE?null:t}(n);e.setChildData(he(t),{domNode:o})}}})}))},t.prototype.render=function(){var e=this,t=this.props,n=t.typeName,a=t.delegated,i=t.leaveAnimation,r=t.maintainContainerHeight,s=this.childrenWithRefs();if(i&&r&&s.push(this.createHeightPlaceholder()),!n)return s;var l=oe({},a,{children:s,ref:function(t){e.parentData.domNode=t}});return Object(o.createElement)(n,l)},t}(o.Component));class fe extends o.PureComponent{constructor(e){super(e),this.state={}}handleClick(e){}mapSongs(){let e=[];for(let t=0;t<this.props.source.length;t++){let n=this.props.source[t];e.push(a.a.createElement(W,{key:n.uri,num:t,serverConnection:this.props.serverConnection,username:this.props.username,songData:{...n},isResult:"results"===this.props.type}))}return 0===e.length&&e.push(a.a.createElement("div",{key:0,className:this.props.classes.noSongs},"songs"===this.props.type?"No songs submitted yet!":"No Songs Found!")),e}render(){const{classes:e}=this.props;return 0===this.props.source.length?a.a.createElement(E.a,{id:"songList",className:e.root,elevation:4},a.a.createElement("div",{key:0,className:this.props.classes.noSongs},"songs"===this.props.type?"No songs submitted yet!":"No Songs Found!")):a.a.createElement(E.a,{id:"songList",className:e.root,elevation:4},a.a.createElement(de,{typeName:null,duration:250,staggerDelayBy:0,enterAnimation:"fade",leaveAnimation:"fade"},this.mapSongs()),a.a.createElement("div",{style:{height:"4px"}}))}}var ge=Object(g.a)(Object(f.a)(e=>({root:{display:"grid",flexDirection:"column",gridGap:"5px",padding:"10px",overflowY:"auto",overflowX:"hidden",position:"relative",margin:"10px 0"},noSongs:{textAlign:"center"}})),Object(r.b)(e=>({}),e=>({})))(fe);let ve=function(e,t,n){let o,a,i,r=null,s=0;n||(n={});let l=()=>{s=!1===n.leading?0:Date.now(),r=null,i=e.apply(o,a),r||(o=a=null)};return function(){let p=Date.now();s||!1!==n.leading||(s=p);let c=t-(p-s);return o=this,a=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),s=p,i=e.apply(o,a),r||(o=a=null)):r||!1===n.trailing||(r=setTimeout(l,c)),i}}((e,t)=>{""!==t?e.socket.emit("searchSong",{songName:t},t=>{e.props.updateSearchResults(t.searchResults)}):e.props.updateSearchResults([])},500);class ye extends o.PureComponent{constructor(e){var t,n,o;super(e),o=e=>{this.props.updateSongName(e.target.value),ve(this,e.target.value)},(n="handleText")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,this.socket=null,this.state={songName:"",searchResults:[]}}componentDidMount(){this.socket=this.props.serverConnection}render(){const{classes:e}=this.props;return a.a.createElement(E.a,{id:"songSubmitForm",className:e.root,elevation:4},a.a.createElement(p.a,{id:"songSearchField",label:"Enter a Song or Artist Name",className:e.textField,value:this.props.songName,onChange:this.handleText,margin:"normal",variant:"outlined",fullWidth:!0}))}}var be=Object(g.a)(Object(f.a)(e=>({root:{display:"flex",flexDirection:"row"},textField:{margin:"2%"}})),Object(r.b)(e=>({songName:e.dj.songs.songName}),e=>({updateSongName:t=>{e(Object(C.d)(t))},updateSearchResults:t=>{e(Object(C.b)(t))}})))(ye),Ne=n(74),xe=n.n(Ne);function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const De={root:{display:"flex",flexDirection:"column",fontSize:"16px",width:"100%",maxWidth:"600px"},[v.a.tablet]:{root:{fontSize:"20px"}},[v.a.laptop]:{root:{}},textField:{margin:"0px"},formPart:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",height:"min-content"},exportButton:{}};class Ee extends o.PureComponent{constructor(e){super(e),Ce(this,"handleSubmitUsername",()=>{""!==this.state.username?this.socket.emit("joinRoom",{roomName:this.roomName,username:this.state.username},e=>{e.success?(this.setState({openUsernameDialog:!1}),xe.a.setItem("dj:roomInfo",{roomName:this.roomName,username:this.state.username})):alert(e.reason)}):alert("username can't be empty")}),Ce(this,"handleText",e=>{this.setState({username:e.target.value})}),Ce(this,"handleLogin",()=>{if(""===this.state.username)return alert("something went wrong!"),void window.location.reload();xe.a.setItem("dj:roomInfo",{roomName:this.roomName,username:this.state.username}).then(()=>{window.location.href="https://accounts.spotify.com/authorize?response_type=code&client_id=501dbd9176ef4ef9af88bfedf7cb7e5a&scope=playlist-modify-private%20user-read-private%20user-read-email%20playlist-read-collaborative%20user-modify-playback-state%20playlist-modify-public%20playlist-read-private&redirect_uri=https%3A%2F%2Ffosse.co%2Fcallback"})}),Ce(this,"handleLogout",()=>{}),Ce(this,"handleCreatePlaylist",()=>{this.socket.emit("createPlaylist",{code:this.state.code},e=>{e.success?alert("playlist created on your spotify account!"):console.log(e.reason)})}),this.socket=null,this.state={username:"",roomName:"",openUsernameDialog:!1,loggedIn:!1,code:null},this.roomName=null}componentDidMount(){this.socket=this.props.serverConnection,this.roomName=this.props.match.params.roomName,this.roomName||console.log("room name not set!"),this.socket.on("songList",e=>{this.props.updateSongList(e.songList)}),xe.a.getItem("dj:roomInfo").then(e=>{e?e.username?this.socket.emit("joinRoom",{roomName:this.roomName,username:e.username},t=>{t.success?e.code?this.socket.emit("verifyToken",{code:e.code},t=>{t.success?this.setState({openUsernameDialog:!1,username:e.username,loggedIn:!0,code:e.code}):(console.log(t.reason),this.setState({openUsernameDialog:!1,username:e.username}))}):this.setState({username:e.username}):this.setState({openUsernameDialog:!0})}):xe.a.clear():this.setState({openUsernameDialog:!0})}).catch(e=>{this.setState({openUsernameDialog:!0})})}componentWillUnmount(){}render(){console.log("rendering dj-room.");const{classes:e}=this.props;return a.a.createElement("div",{className:e.root},a.a.createElement(be,{serverConnection:this.props.serverConnection}),this.props.searchResults.length>0&&a.a.createElement(ge,{serverConnection:this.props.serverConnection,source:this.props.searchResults,type:"results"}),0===this.props.searchResults.length&&a.a.createElement(ge,{serverConnection:this.props.serverConnection,username:this.state.username,source:this.props.songList,type:"songs"}),this.state.loggedIn?a.a.createElement(l.a,{className:e.exportButton,onClick:this.handleCreatePlaylist,color:"primary",variant:"contained"},"Export to Spotify"):a.a.createElement(l.a,{className:e.exportButton,onClick:this.handleLogin,color:"primary",variant:"contained"},"Login to Spotify"),a.a.createElement(c.a,{open:this.state.openUsernameDialog,onClose:()=>{},fullWidth:!0,maxWidth:"sm"},a.a.createElement(d.a,{id:"alert-dialog-title"},"Pick a username"),a.a.createElement(h.a,null,a.a.createElement(p.a,{autoFocus:!0,margin:"dense",id:"name",label:"Username",type:"username",value:this.state.username,onChange:this.handleText,onKeyPress:e=>{"Enter"==e.key&&this.handleSubmitUsername()},fullWidth:!0})),a.a.createElement(m.a,null,a.a.createElement(l.a,{onClick:this.handleSubmitUsername,color:"primary",variant:"contained"},"Submit"))))}}var Ae=Object(g.a)(i.f,Object(f.a)(De),Object(r.b)(e=>({songList:e.dj.songs.songList,searchResults:e.dj.songs.searchResults}),e=>({updateSongList:t=>{e(Object(C.c)(t))}})))(Ee);function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}const we={root:{display:"flex",justifyContent:"center",height:"100%"},[v.a.tablet]:{root:{}},[v.a.laptop]:{root:{}}};class je extends o.Component{constructor(e){super(e),this.socket=null,this.state={roomName:"",open:!1}}componentDidMount(){this.serverConnection&&(this.serverConnection.close(),this.serverConnection=null),this.serverConnection=this.props.serverConnection,this.props.store.dispatch(Object(s.b)({theme:"spotify"})),document.title="Democratic DJ"}render(){console.log("re-rendering dj-app.");const{classes:e}=this.props;return a.a.createElement("div",{className:e.root},a.a.createElement(i.c,null,a.a.createElement(i.a,{path:`${this.props.match.path}/:roomName`,render:e=>a.a.createElement(Ae,Se({},e,{store:this.props.store,serverConnection:this.props.serverConnection}))}),a.a.createElement(i.a,{path:this.props.match.path,render:e=>a.a.createElement(x,Se({},e,{store:this.props.store,serverConnection:this.props.serverConnection}))})))}}var Oe=Object(g.a)(i.f,Object(f.a)(we),Object(r.b)(e=>({}),e=>({})))(je),Pe=n(250),ke=n.n(Pe);function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}class Be extends o.Component{constructor(e){super(e),this.serverConnection=ke()("https://fosse.co",{path:"/8001/socket.io",transports:["polling","websocket","xhr-polling","jsonp-polling"]})}componentDidMount(){}shouldComponentUpdate(e,t){return!0}render(){return console.log("re-rendering dj-index"),a.a.createElement(Oe,Re({},this.props,{serverConnection:this.serverConnection}))}}t.default=Be}}]);